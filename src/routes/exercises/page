/** 
import { json } from "@sveltejs/kit";

export async function load() {

    const exerciseUrl = 'https://exercisedb-api1.p.rapidapi.com/api/v1/exercises?name=Bench%20Press&keywords=chest%20workout%2Cbarbell&limit=13';
    const options = {
        method: 'GET',
        headers: {
            'x-rapidapi-key': '4a3f5ba160msh56e315e291dceecp18fffcjsn9624cb65c267',
            'x-rapidapi-host': 'exercisedb-api1.p.rapidapi.com'
        }
    };
    
        const response = await fetch(exerciseUrl, options);
        const data = await response.json(); 
        return { exercises: data.data };
} 
*/

import { json } from "@sveltejs/kit";

export async function load() {
    const options = {
        method: 'GET',
        headers: {
            'x-rapidapi-key': '4a3f5ba160msh56e315e291dceecp18fffcjsn9624cb65c267',
            'x-rapidapi-host': 'exercisedb-api1.p.rapidapi.com'
        }
    };

    // URLs to fetch
    const exerciseUrl = 'https://exercisedb-api1.p.rapidapi.com/api/v1/exercises?name=Bench%20Press&keywords=chest%20workout%2Cbarbell&limit=13';
    const musclesUrl = 'https://exercisedb-api1.p.rapidapi.com/api/v1/muscles';

    try {
        // Fetch both endpoints in parallel
        const [exerciseRes, musclesRes] = await Promise.all([
            fetch(exerciseUrl, options),
            fetch(musclesUrl, options)
        ]);

        const exercises = await exerciseRes.json(); 
        const muscles = await musclesRes.json();    

        return {
            exercises: exercises.data,  
            muscles: muscles.data   
        };
    } catch (error) {
        console.error('Error fetching APIs:', error);
        return {
            exercises: [],
            muscles: []
        };
    }
}






